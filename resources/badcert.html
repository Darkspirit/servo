<html>
<head>
<title>Certificate error</title>
</head>
<body>
  <p>${reason}</p>
  <button id="leave" onclick="history.back()">Go back (recommended)</button>
  <button id="allow">Allow certificate temporarily</button>
  <pre id="pem">${pem}</pre>
  <script>
    let pem = document.getElementById('pem').textContent;
    let button = document.getElementById('allow');
    let exitButton = document.getElementById('leave');
    if (pem.length) {
        button.onclick = function() {
            let xhr = new XMLHttpRequest();
            xhr.open('POST', 'chrome:allowcert');
            xhr.onloadend = function() {
                location.reload(true);
            };
            xhr.send("${secret}&" + pem);
        };
    } else {
        button.style.display = "none";
    }
  </script>
</body>
</html>
